{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>{{ movie.title }}</h2>
  <img src="{{ movie.image.url }}" alt="{{ movie.title }}" class="img-fluid mb-3" style="max-width:200px;">
  <p><strong>Genre:</strong> {{ movie.genre }}</p>
  <p><strong>Year:</strong> {{ movie.year }}</p>
  <p><strong>Description:</strong> {{ movie.description }}</p>

  <hr>
  <h4>Reviews</h4>
  {% if user.is_authenticated %}
    <form method="post" class="mb-3">
      {% csrf_token %}
      <div class="mb-2">
        <textarea name="review" class="form-control" rows="3" placeholder="Write your review..."></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Post Review</button>
    </form>
    {% if error %}
      <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
  {% else %}
    <div class="alert alert-info">Log in to post a review.</div>
  {% endif %}

  {% for review in reviews %}
    <div class="card mb-2">
      <div class="card-body">
        <strong>{{ review.user.username }}</strong> <span class="text-muted">{{ review.created_at|date:"Y-m-d H:i" }}</span>
        <p>{{ review.text }}</p>
      </div>
    </div>
  {% empty %}
    <p>No reviews yet.</p>
  {% endfor %}
</div>
{% endblock %}
